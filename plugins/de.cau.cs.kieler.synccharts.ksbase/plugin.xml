<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin> 
 <extension
       point="de.cau.cs.kieler.ksbase.configurations">
       		<configuration
               TransformationFile="transformations/feature.ext"
               checkVisibility="true"
               contextId="de.cau.cs.kieler.synccharts.diagram.ui.diagramContext"
               defautlIcon="icons/obj16/State.gif"
               editorId="de.cau.cs.kieler.synccharts.diagram.part.SyncchartsDiagramEditorID"
               packageName="de.cau.cs.kieler.synccharts.SyncchartsPackage">
			<transformations>
				<transformation
          tooltip="Create a successor for the selected states"
          icon="icons/successor_state.gif"
          keyboardShortcut="M1+R S"
          name="Add Successor State"
          transformation="addSuccessorStates"
          transformationId="de.cau.cs.kieler.ksbase.addSuc"
          validation="isNoRootState">
				</transformation>
				<transformation
          tooltip="Create a predecessor for the selected state"
          icon="icons/predecessor_state.gif"
          keyboardShortcut="M1+R P"
          name="Add Predecessor State"
          transformation="addPredecessorState"
          transformationId="de.cau.cs.kieler.ksbase.addPred"
          validation="isNoRootState">
				</transformation>
				<transformation
          tooltip="Add a choice construct"
          icon="icons/choice.gif"
          keyboardShortcut="M1+R C"
          name="Add Choice"
          transformation="addChoice"
          transformationId="de.cau.cs.kieler.ksbase.addChoice"
          validation="isNoRootState">
				</transformation>
				<transformation
          tooltip="Flip source and target of the transition"
          icon="icons/flip.gif"
          keyboardShortcut="M1+R F"
          name="Flip Transition"
          transformation="flipTransition"
          transformationId="de.cau.cs.kieler.ksbase.flip">
				</transformation>
				<transformation
          tooltip="Connect both states"
          icon="icons/connect.gif"
          keyboardShortcut="M1+R W"
          name="Connect States"
          transformation="connectStates"
          transformationId="de.cau.cs.kieler.ksbase.connect"
          validation="isNoRootState,statesOnSameHierarchy">
				</transformation>
				<transformation
          tooltip="Create an ABRO SyncChart"
          icon="icons/abro.gif"
          name="Add ABRO"
          transformation="addABRO"
          transformationId="de.cau.cs.kieler.ksbase.addABRO">
				</transformation>
				<transformation
          tooltip="Create a default SyncChart"
          icon="icons/default.gif"
          name="Create Default"
          transformation="addInitialState"
          transformationId="de.cau.cs.kieler.ksbase.empty">
				</transformation>
    <transformation
          tooltip="Set the transition target to the selected state"
          icon="icons/reconnect_target.gif"
          keyboardShortcut="M1+R T"
          name="Set Transition Target"
          transformation="rerouteTransitionTarget"
          transformationId="de.cau.cs.kieler.ksbase.rerouteTarget"
          validation="isNoRootState">
       </transformation>
       <transformation
             tooltip="Set the transition source to the selected state"
             icon="icons/reconnect_source.gif"
             keyboardShortcut="M1+R J"
             name="Set Transition Source"
             transformation="rerouteTransitionSource"
             transformationId="de.cau.cs.kieler.ksbase.rerouteSource"
             validation="isNoRootState">
    	</transformation>
       <transformation
             tooltip="Add a region with an initial state "
             icon="icons/upgrade.gif"
             keyboardShortcut="M1+R R"
             name="Add Region"
             transformation="upgradeState"
             transformationId="de.cau.cs.kieler.ksbase.upgradeState">
       </transformation>
       <transformation
             tooltip="Removing all regions of the selected state"
             icon="icons/downgrade.gif"
             keyboardShortcut="M1+R D"
             name="Remove All Regions"
             transformation="downgradeState"
             transformationId="de.cau.cs.kieler.ksbase.downgradeState"
             validation="isRegionState">
       </transformation>
       <transformation
             tooltip="Create a self loop for the selected state"
             icon="icons/self_loop.gif"
             keyboardShortcut="M1+R O"
             name="Add Self Loop"
             transformation="addSelfLoop"
             transformationId="de.cau.cs.kieler.ksbase.selfLoop"
             validation="isNoRootState">
       </transformation>
       <transformation
             tooltip="Create a new state and move all existing regions to the new one"
             icon="icons/encapsulate.gif"
             keyboardShortcut="M1+R E"
             name="Encapsulate Regions"
             transformation="encapsulateRegions"
             transformationId="de.cau.cs.kieler.ksbase.encapsulate">
       </transformation>
       <transformation
             tooltip="Moving all regions to the parent state and removing the selected state"
             icon="icons/flatten.gif"
             keyboardShortcut="M1+R A"
             name="Extract State"
             transformation="flattenState"
             transformationId="de.cau.cs.kieler.ksbase.flattenState">
       </transformation>
       <transformation
             tooltip="Inserts a sstate between source and target of the transition"
             icon="icons/successor_state.gif"
             name="Insert State"
             transformation="insertState"
             transformationId="de.cau.cs.kieler.synccharts.ksbase.insertState">
       </transformation>
       <transformation
             icon="icons/successor_state.gif"
             name="Add Single Successor State"
             tooltip="Create a successor for the selected state"
             transformation="addSuccessorState"
             transformationId="de.cau.cs.kieler.ksbase.addSingleSuc"
             validation="isNoRootState">
       </transformation>
              <transformation
             icon="icons/quickfix_obj.gif"
             name="Optimize"
             tooltip="Optimize the current Synccharts. This can be configured through the preference page."
             transformation="optimizeSelected"
             transformationId="de.cau.cs.kieler.ksbase.optimize">
       </transformation>
			</transformations>
			<menus>
				<menuContribution locationURI="menu:de.cau.cs.kieler">
					<transformationCommand transformationId="de.cau.cs.kieler.ksbase.addPred"></transformationCommand>
					<transformationCommand transformationId="de.cau.cs.kieler.ksbase.addChoice">
					</transformationCommand>
					<transformationCommand transformationId="de.cau.cs.kieler.ksbase.addSuc"></transformationCommand>
     <transformationCommand
           transformationId="de.cau.cs.kieler.ksbase.upgradeState">
     </transformationCommand>
     <transformationCommand
           transformationId="de.cau.cs.kieler.ksbase.downgradeState">
     </transformationCommand>
     						<transformationCommand transformationId="de.cau.cs.kieler.ksbase.addABRO"></transformationCommand>
						<transformationCommand transformationId="de.cau.cs.kieler.ksbase.empty">
						</transformationCommand>
						        <transformationCommand
              transformationId="de.cau.cs.kieler.ksbase.connect">
        </transformationCommand>
						<transformationCommand transformationId="de.cau.cs.kieler.ksbase.flip"></transformationCommand>
      <transformationCommand
            transformationId="de.cau.cs.kieler.ksbase.rerouteTarget">
      </transformationCommand>
      <transformationCommand
            transformationId="de.cau.cs.kieler.ksbase.rerouteSource">
      </transformationCommand>
      					<transformationCommand
                transformationId="de.cau.cs.kieler.ksbase.selfLoop">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.ksbase.encapsulate">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.ksbase.flattenState">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.synccharts.ksbase.insertState">
          </transformationCommand>
				</menuContribution>
				<menuContribution locationURI="toolbar:de.cau.cs.kieler">
       <transformationCommand
             transformationId="de.cau.cs.kieler.ksbase.addSuc">
       </transformationCommand>
					<transformationCommand transformationId="de.cau.cs.kieler.ksbase.upgradeState">
					</transformationCommand>
     <transformationCommand
           transformationId="de.cau.cs.kieler.ksbase.downgradeState">
     </transformationCommand>
					<transformationCommand transformationId="de.cau.cs.kieler.ksbase.flip"></transformationCommand>
				     <transformationCommand
           transformationId="de.cau.cs.kieler.ksbase.optimize">
     </transformationCommand>
				</menuContribution>
    <menuContribution
          locationURI="popup:org.eclipse.gmf.runtime.diagram.ui.DiagramEditorContextMenu?after=addGroup">
       <transformationCommand
             transformationId="de.cau.cs.kieler.ksbase.addSuc">
       </transformationCommand>
       <transformationCommand
             transformationId="de.cau.cs.kieler.ksbase.addPred">
       </transformationCommand>
       <transformationCommand
             transformationId="de.cau.cs.kieler.ksbase.upgradeState">
       </transformationCommand>
       <transformationCommand
             transformationId="de.cau.cs.kieler.ksbase.downgradeState">
       </transformationCommand>
       <transformationCommand
             transformationId="de.cau.cs.kieler.ksbase.addChoice">
       </transformationCommand>
       <transformationCommand
             transformationId="de.cau.cs.kieler.ksbase.connect">
       </transformationCommand>
          <transformationCommand transformationId="de.cau.cs.kieler.ksbase.flip"></transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.ksbase.rerouteTarget">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.ksbase.rerouteSource">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.ksbase.selfLoop">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.ksbase.encapsulate">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.ksbase.flattenState">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.ksbase.empty">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.synccharts.ksbase.insertState">
          </transformationCommand>
    </menuContribution>
    <menuContribution
          locationURI="popupBar:any">
          <transformationCommand
             transformationId="de.cau.cs.kieler.ksbase.addSingleSuc">
       </transformationCommand>
       <transformationCommand
             transformationId="de.cau.cs.kieler.ksbase.addPred">
       </transformationCommand>
       <transformationCommand
             transformationId="de.cau.cs.kieler.ksbase.upgradeState">
       </transformationCommand>
       <transformationCommand
             transformationId="de.cau.cs.kieler.ksbase.downgradeState">
       </transformationCommand>
       <transformationCommand
             transformationId="de.cau.cs.kieler.ksbase.addChoice">
       </transformationCommand>
          <transformationCommand transformationId="de.cau.cs.kieler.ksbase.flip">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.ksbase.selfLoop">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.ksbase.encapsulate">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.ksbase.flattenState">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.ksbase.empty">
          </transformationCommand>
          <transformationCommand
                transformationId="de.cau.cs.kieler.synccharts.ksbase.insertState">
          </transformationCommand>
    </menuContribution>

			</menus>
		</configuration>
 </extension>
  <extension
       point="org.eclipse.ui.preferencePages">
    <page
          category="de.cau.cs.kieler.synccharts.diagram.general"
          class="de.cau.cs.kieler.synccharts.ksbase.preferences.OptimizationPreferencePage"
          id="de.cau.cs.kieler.synccharts.ksbase.optimizePage"
          name="Optimization">
    </page>
 </extension>

</plugin>
