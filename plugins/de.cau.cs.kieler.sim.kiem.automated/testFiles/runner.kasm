%%% Esterel Module: RUNNER

%%%-----I/O SIGNALS-----
INPUT METER,SECOND,MORNING,LAP,STEP,HEART_BEAT
OUTPUT WALK,RUN,JUMP,GO_TO_WORK,GO_TO_HOSPITAL
%%%-----TOP LOCAL SIGNALS-----
SIGNAL THEART_ATTACK
%%%-----INTERFACE STATEMENTS-----
EMIT _TICKLEN,#18

WABORT THEART_ATTACK,A0
AWAIT MORNING
A4:
ABORT MORNING,A5
LOAD _COUNT,#2
ABORT LAP,A6
A7:
ABORT LAP,A8
LOAD _COUNT,#10
ABORT METER,A9
EMIT WALK
HALT
A9:
SIGNAL HEART_ATTACK
PAR 1,A11,1
PAR 1,A12,2
PARE A13,1
A11:
ABORT HEART_ATTACK,A14
LOAD _COUNT,#3
ABORT SECOND,A15
ABORT STEP,A16
A17:
PRIO 2
PAUSE
PRIO 1
GOTO A17
A16:
A18:
PRIO 1
ABORT STEP,A19
EMIT JUMP
A20:
PRIO 2
PAUSE
PRIO 1
GOTO A20
A19:
PRIO 1
GOTO A18
A15:
EMIT RUN
A14:
EMIT THEART_ATTACK
A21:
PRIO 1
PAUSE
GOTO A21
A12:
A22:
ABORT HEART_BEAT,A23
ABORT SECOND,A24
A25:
PRIO 2
PAUSE
PRIO 1
GOTO A25
A24:
EMIT HEART_ATTACK
A26:
PRIO 1
PAUSE
GOTO A26
A23:
PRIO 1
GOTO A22
A13:
JOIN 0
A8:
GOTO A7
A6:
EMIT GO_TO_WORK
HALT
A5:
GOTO A4
A0:
EMIT GO_TO_HOSPITAL
A1:
HALT
