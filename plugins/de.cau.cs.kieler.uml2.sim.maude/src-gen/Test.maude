

	
*** load ../maude/model-checker.maude
load ../maude/STATES
load ../maude/EVENTS
load ../maude/ACTIONS
load ../maude/TRANS
load ../maude/SM

fmod eclipseInterface is
 including STATEMACHINE .
 including TRANSITIONS .
 including STATES .
*** // Events //
  ops susp ee0 res ee0 ee1 ee1 : -> Event .
  op allEvents : -> Events .

*** // allActions //
	
  ops skip a4 skip a4 a1 a3 : -> Action .

***// States //
  ops T924601121 G1874547736 inner2046796885 B-910885872 outer1526898296 E690055665 N-1229428651 susp441237549 : -> ModState .	
    eq T924601121 = root(R "R-990928836") : C "outer1526898296" : R "R-1819018424" : C "T924601121" .
    eq G1874547736 = root(R "R-990928836") : C "outer1526898296" : R "R-1819018424" : C "inner2046796885" : R "R1540734801" : C "G1874547736" .
    eq inner2046796885 = root(R "R-990928836") : C "outer1526898296" : R "R-1819018424" : C "inner2046796885" .
    eq B-910885872 = root(R "R-990928836") : C "outer1526898296" : R "R-1819018424" : C "B-910885872" .
    eq outer1526898296 = root(R "R-990928836") : C "outer1526898296" .
    eq E690055665 = root(R "R-990928836") : C "outer1526898296" : R "R-1819018424" : C "inner2046796885" : R "R1540734801" : C "E690055665" .
    eq N-1229428651 = root(R "R-990928836") : C "outer1526898296" : R "R-1819018424" : C "inner2046796885" : R "R1754707855" : C "N-1229428651" .
    eq susp441237549 = root(R "R-990928836") : C "susp441237549" .	
 
***// PseudoStates //
  ops DH-1268649620 : -> ModState .	
    eq DH-1268649620 = root(R "R-990928836") : C "outer1526898296" : R "R-1819018424" : H* .	
***// Regions //
  ops R-1819018424 R-990928836 R1754707855 R1540734801 : -> Region .
    eq R-1819018424 = root(R "R-990928836") : C "outer1526898296" : R "R-1819018424" .
    eq R-990928836 = root(R "R-990928836") .
    eq R1754707855 = root(R "R-990928836") : C "outer1526898296" : R "R-1819018424" : C "inner2046796885" : R "R1754707855" .
    eq R1540734801 = root(R "R-990928836") : C "outer1526898296" : R "R-1819018424" : C "inner2046796885" : R "R1540734801" .
***// allVerts //
  op allVerts : -> Verts .
  eq allVerts = R-1819018424, R-990928836, R1754707855, R1540734801 , T924601121, G1874547736, inner2046796885, B-910885872, outer1526898296, E690055665, N-1229428651, susp441237549 .
	
***// defaults //
  ops defR-1819018424 defR-990928836 defR1754707855 defR1540734801 : -> Default .
 eq defR-1819018424 = R-1819018424 default B-910885872 .
 eq defR1754707855 = R1754707855 default N-1229428651 .
 eq defR1540734801 = R1540734801 default E690055665 .
 eq defR-990928836 = R-990928836 default outer1526898296 .
  op allDefs : -> Defaults .
  eq allDefs = defR-1819018424, defR-990928836, defR1754707855, defR1540734801 .
  
***// deep defaults //
  ops dDefR-1819018424 dDefR-990928836 dDefR1754707855 dDefR1540734801 : -> DeepDefault .
 eq dDefR-1819018424 = R-1819018424 deepdefault B-910885872 .
  op allDHDefs : -> DeepDefaults .
  eq allDHDefs = dDefR-1819018424, dDefR-990928836, dDefR1754707855, dDefR1540734801 .

***// shallow defaults //
  ops sDefR-1819018424 sDefR-990928836 sDefR1754707855 sDefR1540734801 : -> ShallowDefault .
  
  op allSHDefs : -> ShallowDefaults .
  eq allSHDefs = sDefR-1819018424, sDefR-990928836, sDefR1754707855, sDefR1540734801 .

*** Transitions


*** ToDo: Add trigger statt noevent!!
  ops trouter2susp1444566273  trsusp2DH1714787712  trE2G-525037410  trG2T-2040602862      trF148389467 trJ-242782697      : -> ModTransition .
  
   eq trouter2susp1444566273 = (outer1526898296) susp Gd skip skip skip (susp441237549) R-990928836 .
   eq trsusp2DH1714787712 = (susp441237549) res Gd skip skip skip (DH-1268649620) R-990928836 .
   eq trE2G-525037410 = (E690055665) ee1 Gd a1 skip skip (G1874547736) R1540734801 .
   eq trG2T-2040602862 = (G1874547736) ee1 Gd a3 skip skip (T924601121) R1540734801 .  
  
   eq trF148389467 = (B-910885872) ee0 Gd a4 skip skip (E690055665,N-1229428651) R-1819018424 .         
   eq trJ-242782697 = (G1874547736,N-1229428651) ee0 Gd a4 skip skip (T924601121) R-1819018424 .           
  op allTrans : -> Transitions .
  eq allTrans = trouter2susp1444566273,  trsusp2DH1714787712,  trE2G-525037410,  trG2T-2040602862  				,                trF148389467,  trJ-242782697 .


***/// A state machine consits of Vertices Defaultsstatesfunction ShallowDefaultstatesfunction DeepDefaultstatesfunction EntryActionsfunction ExitActionsFunction Transitions 
  op SMINT : -> StateMachine .
  ***// ToDo: add entry/exit actions//
  eq SMINT = (SM allVerts allDefs allSHDefs allDHDefs (empty).EntryActions (empty).ExitActions allTrans) .



load ../maude/STEPSEM

mod INIT is
	including STEPSEM .
	
	vars msst mastate : MState .
	vars V V2 : Verts .
	var ac ac2 : Actions .
	var T : Transitions .
	var ES : Events .
	var mode : String .
	vars HC : HistoryConfs .
	
	op isDone_ : MState -> Bool .
	eq isDone (maState mode ($doneC V HC) empty) = true .
	eq isDone msst = false [owise] .
endm

***(
set break on .
break select finishedRTCESINT discardFSetESINT .
)***

***(
#####################################################
##          Interface     for     Eclipse          ##        
#####################################################
search (maState "UML" ($stableC prettyVerts(<Konfiguration>) prettyHc(<HistoryKonfiguration>)) <Events>) =>* mastate such that isDone mastate .

- <Konfiguration>: eine durch "," getrennte Menge von Regionen und States. Diese muss den Anforderungen im Standard entsprechen.
  z.B: Rroot, Csusp (aus Test.maude)
- <HistoryKonfiguration>: kann erstmal empty sein
- <Events>: eine durch "," getrennte Menge von Events die abgearbeitet werden soll

(Rroot = R-990928836 , Csusp = susp441237549)
search (maState "UML" ($stableC (prettyVerts (R-990928836 , susp441237549)) empty) res) =>* mastate such that isDone mastate .
multistep
search (maState "UML" ($stableC (prettyVerts (R-990928836 , susp441237549)) empty) (res, ee1)) =>* mastate such that isDone mastate .

search (maState "UML" ($stableC (prettyVerts (Rroot, Csusp)) empty) res) =>* mastate such that isDone mastate .
)***

  
endfm

	