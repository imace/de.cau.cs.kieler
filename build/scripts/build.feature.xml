<project name="Build All Elements" default="call.antRunner">

        <!-- basedir has to be set at ant call! -->

	<property file="/var/lib/tomcat5.5/webapps/hudson/jobs/ImportBuildFiles/workspace/scripts/build.general.properties" />
	
	<!-- target calls the eclipse antRunner processing THIS build file on target 'main' -->
	<target name="call.antRunner">
	        <property name="jobdirabs" location="${jobdir}"/>
	        <echo message="${jobdirabs}"/>
		<echo message="${baseLocation}"/>
		<echo message="${baseLocation}/plugins/org.eclipse.equinox.launcher_${equinoxLauncherPluginVersion}.jar"/>
		<java classname="org.eclipse.equinox.launcher.Main" fork="true" failonerror="true">
			<arg value="-configuration" />
			<arg value="/var/lib/tomcat5.5/webapps/hudson/jobs/ImportBuildFiles/workspace/eclipseHome" />
			<arg value="-data" />
			<arg value="/var/lib/tomcat5.5/webapps/hudson/jobs/ImportBuildFiles/workspace/eclipseHome/workspace" />
			<arg value="-clean" />
			<arg value="-consoleLog" />
			<arg value="-application" />
			<arg value="org.eclipse.ant.core.antRunner" />
			<arg value="-buildfile" />
			<arg value="build.feature.xml" />
			<arg value="main" />
			<arg value="-Dbasedir=${jobdirabs}" />
			<arg value="-Djobdirabs=${jobdirabs}" />
			<arg value="-DtopLevelElementType=feature" />
			<arg value="-DtopLevelElementId=${part}" />
			<classpath>
				<pathelement location="${baseLocation}/plugins/org.eclipse.equinox.launcher_${equinoxLauncherPluginVersion}.jar" />
			</classpath>
		</java>
	</target>

	<target name="main">
		<echo message="BaseDir ${basedir}"/>
		<echo message="JobDirAbs ${jobdirabs}"/>
		<echo message="BuildDir ${buildDirectory}"/>
	  <ant antfile="${baseLocation}/plugins/org.eclipse.pde.build_${pdeBuildPluginVersion}/scripts/build.xml">
	       <target name="generate"/>
	  </ant>
	  <ant antfile="build.xml" dir="${elementPath}">
	      <property name="feature.destination" value="${buildDirectory}/update-site/features"/>
	      <property name="plugin.destination" value="${buildDirectory}/update-site/plugins"/>
	      <target name="build.jars"/>
	      <target name="build.update.jar"/>
	  </ant>

<!--	      <mkdir dir="${buildDirectory}/update-site"/>
	      <mkdir dir="${buildDirectory}/update-site/features"/>
	      <copy todir="${buildDirectory}/update-site/features">
		  <fileset dir="${buildDirectory}/features">
		      <include name="*.jar"/>
		  </fileset>
	      </copy>
	      <mkdir dir="${buildDirectory}/update-site/plugins"/>
	      <copy todir="${buildDirectory}/update-site/plugins">
		  <fileset dir="${buildDirectory}/plugins">
		      <include name="*.jar"/>
		  </fileset>
	      </copy>
-->
	</target>
</project>
