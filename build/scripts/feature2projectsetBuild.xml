<project name="Transform feature to project set" default="all" basedir=".">

    <property environment="system"/>
    <property name="antContrib.home"     location="/home/kieler/ant-contrib" />
    <property name="build.basedir"       location="${system.WORKSPACE}" />
    <property name="scriptdir" location="."/>
	<property name="transformation.file" value="feature2projectset.xsl" />
	
    <taskdef resource="net/sf/antcontrib/antcontrib.properties" classpath="${antContrib.home}/lib/ant-contrib.jar" />
    <taskdef name="for" classname="net.sf.antcontrib.logic.For" classpath="${antContrib.home}/lib/ant-contrib.jar" />
    
    <target name="all">
      <foreach param="feature.dir" target="f2p">
        <path>
          <dirset dir="${build.basedir}" includes="*" />
        </path>
      </foreach>
    </target>

	<target name="f2p">
		<xslt style="${scriptdir}/${transformation.file}" in="${feature.dir}/feature.xml" out="${feature.dir}/feature.psf"/>
	</target>
</project>
